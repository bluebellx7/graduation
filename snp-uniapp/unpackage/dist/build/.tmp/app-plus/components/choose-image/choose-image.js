(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/choose-image/choose-image"],{1380:function(e,t,n){},2324:function(e,t,n){"use strict";(function(e){n("1c35"),n("921b");a(n("66fd"));var t=a(n("b740"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"284c":function(e,t,n){"use strict";var a,o=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"b",function(){return o}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return a})},"7c8e":function(e,t,n){"use strict";n.r(t);var a=n("f6ac"),o=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t["default"]=o.a},b740:function(e,t,n){"use strict";n.r(t);var a=n("284c"),o=n("7c8e");for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);n("c9e2");var u,i=n("f0c5"),c=Object(i["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],u);t["default"]=c.exports},c9e2:function(e,t,n){"use strict";var a=n("1380"),o=n.n(a);o.a},f6ac:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return l(e)||c(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function s(e,t,n,a,o,r,u){try{var i=e[r](u),c=i.value}catch(l){return void n(l)}i.done?t(c):Promise.resolve(c).then(a,o)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function u(e){s(r,a,o,u,i,"next",e)}function i(e){s(r,a,o,u,i,"throw",e)}u(void 0)})}}var f={data:function(){return{upload_len:0,upload_cache:[],upload_cache_list:[],upload_before_list:[]}},name:"sunui-upimg",props:{url:{type:String,default:"https://a3.dns06.net.cn/app/index.php?i=2&c=entry&a=wxapp&do=Upload_qiniu_b&m=jzwx_a"},upload_img_wh:{type:String,default:"width:162rpx;height:162rpx;"},upload_count:{type:[Number,String],default:9},upload_auto:{type:Boolean,default:!0},upimg_move:{type:Boolean,default:!0},upimg_preview:{type:Array,default:function(){return[]}},upimg_delaytime:{type:[Number,String],default:300},header:{type:Object,default:function(){return{}}}},created:function(){var e=p(o.default.mark(function e(){var t=this;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this,setTimeout(function(){t.upload_before_list=t.upload_before_list.concat(t.upimg_preview),t.upload_len=t.upload_before_list.length,t.upimg_preview.map(function(e){t.upload_cache_list.push(e.path)}),t.emit()},this.upimg_delaytime);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{upImage:function(t,n){var a=this,o=t.map(function(e){return d(h)({url:a.url,path:e,name:"file",extra:n,_self:a})});e.showLoading({title:"正在上传..."}),Promise.all(o).then(function(t){var n;e.hideLoading(),(n=a.upload_cache_list).push.apply(n,u(t)),a.emit()}).catch(function(t){e.hideLoading()})},chooseImage:function(){var t=this;e.chooseImage({count:t.upload_count-t.upload_before_list.length,sizeType:["compressed","original"],sourceType:["album","camera"],success:function(e){for(var n=0,a=e.tempFiles.length;n<a;n++)e.tempFiles[n]["upload_percent"]=0,t.upload_before_list.push(e.tempFiles[n]);t.upload_cache=e.tempFilePaths,t.upload(t.upload_auto)},fail:function(e){console.log(a(e," at components\\choose-image\\choose-image.vue:122"))}})},upload:function(){var e=p(o.default.mark(function e(t){var n;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this,!t){e.next=6;break}return e.next=4,n.upImage(n.upload_cache,n.header);case 4:e.next=7;break;case 6:console.warn(a("传输参数:this.$refs.xx.upload(true)才可上传,默认false"," at components\\choose-image\\choose-image.vue:128"));case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),previewImage:function(t){for(var n=this,a=[],o=0,r=n.upload_before_list.length;o<r;o++)a.push(n.upload_before_list[o].path);e.previewImage({current:t,urls:a})},removeImage:function(e){var t=this;t.upload_before_list.splice(e,1),t.upload_cache_list.splice(e,1),t.upload_len=t.upload_before_list.length,t.emit()},emit:function(){var e=this;e.$emit("change",e.upload_cache_list)}}};t.default=f;var d=function(e){return function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return new Promise(function(n,o){e.apply(void 0,[Object.assign({},t,{success:n,fail:o})].concat(a))})}},h=function(t){var n=t.url,r=t._self,u=t.path,i=t.name,c=t.extra,l=t.success,s=(t.progress,t.fail),f=e.uploadFile({url:n,filePath:u,name:i,formData:c,success:function(e){var t=e.data;console.warn(a("sunui-upimg - 如发现没有获取到返回值请到源码191行修改后端返回图片路径以便正常使用插件",JSON.parse(t)," at components\\choose-image\\choose-image.vue:188"));try{t=JSON.parse(e.data).info}catch(n){throw t}200==e.statusCode?l&&l(t):s&&s(t)},fail:function(e){console.log(a(e," at components\\choose-image\\choose-image.vue:207")),s&&s(e)}});f.onProgressUpdate(function(){var e=p(o.default.mark(function e(t){var n,a;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=0,a=r.upload_before_list.length;case 1:if(!(n<a)){e.next=8;break}return e.next=4,t.progress;case 4:r.upload_before_list[n]["upload_percent"]=e.sent;case 5:n++,e.next=1;break;case 8:r.upload_before_list=r.upload_before_list,r.upload_len=r.upload_before_list.length;case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}}).call(this,n("6e42")["default"],n("0de9")["default"])}},[["2324","common/runtime","common/vendor"]]]);