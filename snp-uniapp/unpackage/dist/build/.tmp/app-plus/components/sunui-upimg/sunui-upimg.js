(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/sunui-upimg/sunui-upimg"],{"73ea":function(e,t,n){"use strict";n.r(t);var u=n("c1d5"),a=n.n(u);for(var r in u)"default"!==r&&function(e){n.d(t,e,function(){return u[e]})}(r);t["default"]=a.a},9124:function(e,t,n){"use strict";var u=n("f33b"),a=n.n(u);a.a},b732:function(e,t,n){"use strict";var u,a=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return u})},c1d5:function(e,t,n){"use strict";(function(e,u){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return c(e)||l(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function s(e,t,n,u,a,r,i){try{var o=e[r](i),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(u,a)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(u,a){var r=e.apply(t,n);function i(e){s(r,u,a,i,o,"next",e)}function o(e){s(r,u,a,i,o,"throw",e)}i(void 0)})}}var f={data:function(){return{upload_len:0,upload_cache:[],upload_cache_list:[],upload_before_list:[]}},name:"sunui-upimg",props:{url:{type:String,default:"https://a3.dns06.net.cn/app/index.php?i=2&c=entry&a=wxapp&do=Upload_qiniu_b&m=jzwx_a"},upload_img_wh:{type:String,default:"width:162rpx;height:162rpx;"},upload_count:{type:[Number,String],default:9},upload_auto:{type:Boolean,default:!0},upimg_move:{type:Boolean,default:!0},upimg_preview:{type:Array,default:function(){return[]}},upimg_delaytime:{type:[Number,String],default:300},header:{type:Object,default:function(){return{}}}},created:function(){var e=p(a.default.mark(function e(){var t=this;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this,setTimeout(function(){t.upload_before_list=t.upload_before_list.concat(t.upimg_preview),t.upload_len=t.upload_before_list.length,t.upimg_preview.map(function(e){t.upload_cache_list.push(e.path)}),t.emit()},this.upimg_delaytime);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{upImage:function(t,n){var u=this,a=t.map(function(e){return d(h)({url:u.url,path:e,name:"file",extra:n,_self:u})});e.showLoading({title:"正在上传..."}),Promise.all(a).then(function(t){var n;e.hideLoading(),(n=u.upload_cache_list).push.apply(n,i(t)),u.emit()}).catch(function(t){e.hideLoading()})},chooseImage:function(){var t=this;e.chooseImage({count:t.upload_count-t.upload_before_list.length,sizeType:["compressed","original"],sourceType:["album","camera"],success:function(e){for(var n=0,u=e.tempFiles.length;n<u;n++)e.tempFiles[n]["upload_percent"]=0,t.upload_before_list.push(e.tempFiles[n]);t.upload_cache=e.tempFilePaths,t.upload(t.upload_auto)},fail:function(e){console.log(u(e," at components\\sunui-upimg\\sunui-upimg.vue:130"))}})},upload:function(){var e=p(a.default.mark(function e(t){var n;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this,!t){e.next=6;break}return e.next=4,n.upImage(n.upload_cache,n.header);case 4:e.next=7;break;case 6:console.warn(u("传输参数:this.$refs.xx.upload(true)才可上传,默认false"," at components\\sunui-upimg\\sunui-upimg.vue:136"));case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),previewImage:function(t){for(var n=this,u=[],a=0,r=n.upload_before_list.length;a<r;a++)u.push(n.upload_before_list[a].path);e.previewImage({current:t,urls:u})},removeImage:function(e){var t=this;t.upload_before_list.splice(e,1),t.upload_cache_list.splice(e,1),t.upload_len=t.upload_before_list.length,t.emit()},emit:function(){var e=this;e.$emit("change",e.upload_cache_list)}}};t.default=f;var d=function(e){return function(t){for(var n=arguments.length,u=new Array(n>1?n-1:0),a=1;a<n;a++)u[a-1]=arguments[a];return new Promise(function(n,a){e.apply(void 0,[Object.assign({},t,{success:n,fail:a})].concat(u))})}},h=function(t){var n=t.url,r=t._self,i=t.path,o=t.name,l=t.extra,c=t.success,s=(t.progress,t.fail),f=e.uploadFile({url:n,filePath:i,name:o,formData:l,success:function(e){var t=e.data;console.warn(u("sunui-upimg - 如发现没有获取到返回值请到源码191行修改后端返回图片路径以便正常使用插件",JSON.parse(t)," at components\\sunui-upimg\\sunui-upimg.vue:196"));try{t=JSON.parse(e.data).info}catch(n){throw t}200==e.statusCode?c&&c(t):s&&s(t)},fail:function(e){console.log(u(e," at components\\sunui-upimg\\sunui-upimg.vue:215")),s&&s(e)}});f.onProgressUpdate(function(){var e=p(a.default.mark(function e(t){var n,u;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=0,u=r.upload_before_list.length;case 1:if(!(n<u)){e.next=8;break}return e.next=4,t.progress;case 4:r.upload_before_list[n]["upload_percent"]=e.sent;case 5:n++,e.next=1;break;case 8:r.upload_before_list=r.upload_before_list,r.upload_len=r.upload_before_list.length;case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}}).call(this,n("6e42")["default"],n("0de9")["default"])},c7d6:function(e,t,n){"use strict";n.r(t);var u=n("b732"),a=n("73ea");for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);n("9124");var i,o=n("f0c5"),l=Object(o["a"])(a["default"],u["b"],u["c"],!1,null,null,null,!1,u["a"],i);t["default"]=l.exports},f33b:function(e,t,n){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/sunui-upimg/sunui-upimg-create-component',
    {
        'components/sunui-upimg/sunui-upimg-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("c7d6"))
        })
    },
    [['components/sunui-upimg/sunui-upimg-create-component']]
]);
