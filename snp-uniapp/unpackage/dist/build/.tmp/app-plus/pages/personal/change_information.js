(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/personal/change_information"],{"2bc4":function(e,a,t){},"7cc9":function(e,a,t){"use strict";var n,c=function(){var e=this,a=e.$createElement;e._self._c},o=[];t.d(a,"b",function(){return c}),t.d(a,"c",function(){return o}),t.d(a,"a",function(){return n})},"9d19":function(e,a,t){"use strict";var n=t("2bc4"),c=t.n(n);c.a},b717:function(e,a,t){"use strict";(function(e,n){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;o(t("9f11"));var c=o(t("0747"));function o(e){return e&&e.__esModule?e:{default:e}}var i={data:function(){return{userId:"",modalName:null,userName:"",fieldStr:"",mail:"",birthday:"1990-01-01",telephone:"",synopsis:"",sex:["女","男"],sexIndex:-1,captcha:"",captchaName:"修改邮箱",field:"",fieldbox:"",checkbox:[{value:0,name:"娱乐",alias:"funny",checked:0},{value:1,name:"动漫",alias:"anime",checked:0},{value:2,name:"新闻",alias:"news",checked:0},{value:3,name:"时尚",alias:"fashion",checked:0},{value:4,name:"运动",alias:"motion",checked:0},{value:5,name:"科技",alias:"science",checked:0}]}},onShow:function(a){console.log(e("加载信息界面"," at pages\\personal\\change_information.vue:135"));var t=this;if(t.userId=n.getStorageSync("userId"),console.log(e(t.userId," at pages\\personal\\change_information.vue:138")),t.userName=n.getStorageSync("userName"),t.mail=n.getStorageSync("mail"),t.birthday=n.getStorageSync("birthday"),t.telephone=n.getStorageSync("telephone"),t.synopsis=n.getStorageSync("synopsis"),t.field=n.getStorageSync("field"),t.sexIndex=n.getStorageSync("sex"),console.log(e(""==t.sexIndex," at pages\\personal\\change_information.vue:146")),""==t.mail&&(t.captchaName="设置邮箱"),1==t.field.funny&&(t.checkbox[0].checked=1,t.fieldStr="娱乐"),1==t.field.anime&&(t.checkbox[1].checked=1,""==t.fieldStr?t.fieldStr="动漫":t.fieldStr+=",动漫"),1==t.field.news&&(t.checkbox[2].checked=1,""==t.fieldStr?t.fieldStr="新闻":t.fieldStr+=",新闻"),1==t.field.fashion&&(t.checkbox[3].checked=1,""==t.fieldStr?t.fieldStr="时尚":t.fieldStr+=",时尚"),1==t.field.motion&&(t.checkbox[4].checked=1,""==t.fieldStr?t.fieldStr="运动":t.fieldStr+=",运动"),1==t.field.science&&(t.checkbox[5].checked=1,""==t.fieldStr?t.fieldStr="科技":t.fieldStr+=",科技"),t.fieldStr.length>9){var c=t.fieldStr.substr(0,8);c+="  ...",t.fieldStr=c}console.log(e(t.fieldStr," at pages\\personal\\change_information.vue:199")),t.fieldbox=checkbox,""==t.mail&&(t.captchaName="绑定邮箱")},methods:{ChooseCheckbox:function(e){for(var a="",t=this.checkbox,n=e.currentTarget.dataset.value,c=0,o=t.length;c<o;++c)if(t[c].value==n){1==t[c].checked?t[c].checked=0:t[c].checked=1;break}for(var i=0,s=t.length;i<s;++i)1==t[i].checked&&(""==a?a=t[i].name:a+=","+t[i].name);if(a.length>9){var r=a.substr(0,8);r+="  ...",a=r}this.fieldStr=a},showModal:function(e){this.modalName=e.currentTarget.dataset.target},hideModal:function(e){this.modalName=null},sexChange:function(e){this.sexIndex=e.detail.value},DateChange:function(e){this.birthday=e.detail.value},changemail:function(){""==this.mail?n.navigateTo({url:"./bandmail"}):n.navigateTo({url:"./changemail?mail="+this.mail})},change:function(){var a=this,t=this,o=[{name:"userName",checkType:"string",checkRule:"0,8",errorMsg:"昵称过长"},{name:"synopsis",checkType:"string",checkRule:"0,254",errorMsg:"简介过长"},{name:"telephone",checkType:"phoneno",checkRule:"",errorMsg:"手机号格式不正确"}],i=c.default.check(t,o);i?(console.log(e(this.birthday," at pages\\personal\\change_information.vue:293")),n.request({url:this.Server_IP+"changeInformation",data:{userId:this.userId,funny:this.checkbox[0].checked,anime:this.checkbox[1].checked,news:this.checkbox[2].checked,fashion:this.checkbox[3].checked,motion:this.checkbox[4].checked,science:this.checkbox[5].checked,userName:this.userName,telephone:this.telephone,birthday:this.birthday,synopsis:this.synopsis,sex:this.sexIndex},header:{"custom-header":"changeInformation"},method:"POST",dataType:"json",success:function(t){if(console.log(e(t.data," at pages\\personal\\change_information.vue:316")),"0"==t.data.info.code){n.setStorageSync("userId",a.userId),console.log(e("成功"," at pages\\personal\\change_information.vue:319"));for(var c=a.field,o=a.checkbox,i=0,s=o.length;i<s;++i)c[o[i].alias]=o[i].checked;n.setStorageSync("field",c),n.setStorageSync("userName",a.userName),n.setStorageSync("telephone",a.telephone),n.setStorageSync("sex",a.sexIndex),n.setStorageSync("birthday",a.birthday),n.setStorageSync("synopsis",a.synopsis),n.navigateBack({delta:1}),n.showToast({icon:"none",title:"信息修改成功"})}else console.log(e(t.data.info.message," at pages\\personal\\change_information.vue:341")),n.showToast({icon:"none",title:t.data.info.message})}})):n.showToast({title:c.default.error,icon:"none"})}}};a.default=i}).call(this,t("0de9")["default"],t("6e42")["default"])},c903:function(e,a,t){"use strict";t.r(a);var n=t("7cc9"),c=t("d71e");for(var o in c)"default"!==o&&function(e){t.d(a,e,function(){return c[e]})}(o);t("9d19");var i,s=t("f0c5"),r=Object(s["a"])(c["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);a["default"]=r.exports},d138:function(e,a,t){"use strict";(function(e){t("1c35"),t("921b");n(t("66fd"));var a=n(t("c903"));function n(e){return e&&e.__esModule?e:{default:e}}e(a.default)}).call(this,t("6e42")["createPage"])},d71e:function(e,a,t){"use strict";t.r(a);var n=t("b717"),c=t.n(n);for(var o in n)"default"!==o&&function(e){t.d(a,e,function(){return n[e]})}(o);a["default"]=c.a}},[["d138","common/runtime","common/vendor"]]]);