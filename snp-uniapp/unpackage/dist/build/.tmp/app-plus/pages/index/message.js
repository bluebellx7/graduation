(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/message"],{"1e8d":function(e,t,s){"use strict";var n,o=function(){var e=this,t=e.$createElement,s=(e._self._c,e.__map(e.userAddConversationList,function(t,s){var n=e.nodesFliter(t.conversation.lastMessage.messageForShow);return{$orig:e.__get_orig(t),m0:n}}));e.$mp.data=Object.assign({},{$root:{l0:s}})},a=[];s.d(t,"b",function(){return o}),s.d(t,"c",function(){return a}),s.d(t,"a",function(){return n})},"23f1":function(e,t,s){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(s("04db")),a=s("2f62");function i(e){return e&&e.__esModule?e:{default:e}}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){u(e,t,s[t])})}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var c={name:"record",data:function(){return{userList:o.default,friendList:[],isActive:0,userAddConversationList:[]}},computed:r({},(0,a.mapState)({isLogin:function(e){return e.isLogin},isSDKReady:function(e){return e.isSDKReady},conversationList:function(e){return e.conversationList}})),watch:{isSDKReady:function(e){e&&this.getConversationList()},conversationList:function(t){this.getUserInfo(t),console.log(e(1.111111111111111e25," at pages\\index\\message.vue:92")),console.log(e(this.userAddConversationList," at pages\\index\\message.vue:93")),console.log(e(1.111111111111111e25," at pages\\index\\message.vue:94"))}},methods:{outLoginBtn:function(){var t=this,s=this.tim.logout();s.then(function(e){t.$store.commit("reset"),n.reLaunch({url:"../index/index"})}).catch(function(t){console.log(e("退出失败"," at pages\\index\\message.vue:108"))})},nodesFliter:function(e){var t='<div style="align-items: center;word-wrap:break-word;">'+e+"</div>";return t},changeTabBtn:function(e){this.isActive=e,this.isSDKReady&&this.getConversationList()},getConversationList:function(){var t=this,s=this.tim.getConversationList();s.then(function(s){console.log(e("conversationList111111111111111111111111111"," at pages\\index\\message.vue:128")),console.log(e(s," at pages\\index\\message.vue:129")),console.log(e("conversationList111111111111111111111111111111"," at pages\\index\\message.vue:130"));var n=s.data.conversationList;n.length&&t.$store.commit("updateConversationList",n)}).catch(function(t){console.warn(e("getConversationList error:",t," at pages\\index\\message.vue:139"))})},getUserInfo:function(t){var s=this;this.userAddConversationList=[],t.forEach(function(t){var o={};o.conversation=t,n.request({url:s.Server_IP+"userObj",data:{userId:t.toAccount},header:{"custom-header":"userObj"},method:"POST",dataType:"json",success:function(t){console.log(e(t.data," at pages\\index\\message.vue:159")),"0"==t.data.info.code?(console.log(e(t," at pages\\index\\message.vue:161")),console.log(e(JSON.parse(t.data.data.userObj)," at pages\\index\\message.vue:162")),o.user=JSON.parse(t.data.data.userObj),s.userAddConversationList.push(JSON.parse(JSON.stringify(o))),console.log(e(s.userAddConversationList," at pages\\index\\message.vue:165"))):console.log(e("获取用户对象失败"," at pages\\index\\message.vue:167"))},fail:function(){console.log(e("获取用户对象失败"," at pages\\index\\message.vue:171"))}})})},toRoom:function(t){this.$store.commit("updateConversationActive",t),console.log(e(t," at pages\\index\\message.vue:179")),n.request({url:this.Server_IP+"userObj",data:{userId:t.user.userId},header:{"custom-header":"userObj"},method:"POST",dataType:"json",success:function(t){console.log(e(t.data," at pages\\index\\message.vue:191")),"0"==t.data.info.code?(console.log(e(t," at pages\\index\\message.vue:193")),console.log(e(JSON.parse(t.data.data.userObj)," at pages\\index\\message.vue:194")),n.setStorageSync("toUserInfo",JSON.parse(t.data.data.userObj)),n.navigateTo({url:"../chat/room"})):console.log(e("获取用户对象失败"," at pages\\index\\message.vue:200"))},fail:function(){console.log(e("获取用户对象失败"," at pages\\index\\message.vue:204"))}})},checkUserToRoom:function(t){console.log(e(t," at pages\\index\\message.vue:211")),this.$store.commit("createConversationActive",t.userId),n.navigateTo({url:"../chat/room"})}},onShow:function(){var t=this;this.isSDKReady?(console.log(e("2222"," at pages\\index\\message.vue:222")),this.getConversationList()):console.log(e("333333"," at pages\\index\\message.vue:225")),n.request({url:this.Server_IP+"queryFollowMessage",data:{userId:n.getStorageSync("userId")},header:{"custom-header":"queryFollowMessage"},method:"POST",dataType:"json",success:function(s){console.log(e(s.data," at pages\\index\\message.vue:238")),"0"==s.data.info.code?(console.log(e(s," at pages\\index\\message.vue:240")),console.log(e(JSON.parse(s.data.data.follow)," at pages\\index\\message.vue:241")),t.friendList=JSON.parse(s.data.data.follow),n.setStorageSync("friendList",t.friendList)):console.log(e("获取关注粉丝失败"," at pages\\index\\message.vue:245"))},fail:function(){console.log(e("获取关注粉丝失败"," at pages\\index\\message.vue:249"))}})},onLoad:function(){}};t.default=c}).call(this,s("0de9")["default"],s("6e42")["default"])},2593:function(e,t,s){"use strict";s.r(t);var n=s("1e8d"),o=s("5569");for(var a in o)"default"!==a&&function(e){s.d(t,e,function(){return o[e]})}(a);s("bded");var i,r=s("f0c5"),u=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);t["default"]=u.exports},"283e":function(e,t,s){"use strict";(function(e){s("1c35"),s("921b");n(s("66fd"));var t=n(s("2593"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s("6e42")["createPage"])},5569:function(e,t,s){"use strict";s.r(t);var n=s("23f1"),o=s.n(n);for(var a in n)"default"!==a&&function(e){s.d(t,e,function(){return n[e]})}(a);t["default"]=o.a},"8f63":function(e,t,s){},bded:function(e,t,s){"use strict";var n=s("8f63"),o=s.n(n);o.a}},[["283e","common/runtime","common/vendor"]]]);