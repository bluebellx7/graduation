(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{1524:function(e,t,a){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={data:function(){return{isLogin:!1,loadname:"加载更多",Rloadname:"加载更多",isCard:!0,sayList:null,isthumbColor:"#ff5500",StatusBar:this.StatusBar,CustomBar:this.CustomBar,PageCur:"basics",userIds:"",height:"",current:0,Fstart:3,Rstart:0,pagesize:3,recommendList:null}},computed:{style:function(){var e=this.StatusBar,t=this.CustomBar,a="height:".concat(t,"px;padding-top:").concat(e,"px;");return a}},onLoad:function(){var t=this,s=this;e.getSystemInfo({success:function(e){s.height=e.windowHeight}}),console.log(a(this.height," at pages\\index\\index.vue:129")),1==e.getStorageSync("isLogin")?e.request({url:this.Server_IP+"recommendS",data:{userId:e.getStorageSync("userId")},header:{"custom-header":"recommendS"},method:"POST",dataType:"json",success:function(s){if(console.log(a("获取推荐微博第一页成功"," at pages\\index\\index.vue:142")),console.log(a(s," at pages\\index\\index.vue:143")),"0"==s.data.info.code){if(""==s.data.data.sayList)var n=[];else{n=JSON.parse(s.data.data.recommend);for(var o=0;o<n.length;o++){var i=n[o].picUrl;n[o].picUrl=JSON.parse(i)}}t.recommendList=n,e.setStorageSync("recommendList",t.recommendList)}}}):e.request({url:this.Server_IP+"recommend",data:{start:0,pagesize:3},header:{"custom-header":"recommend"},method:"POST",dataType:"json",success:function(s){if(console.log(a("获取推荐微博第一页成功"," at pages\\index\\index.vue:173")),console.log(a(s," at pages\\index\\index.vue:174")),"0"==s.data.info.code){if(""==s.data.data.sayList)var n=[];else{n=JSON.parse(s.data.data.recommend);for(var o=0;o<n.length;o++){var i=n[o].picUrl;n[o].picUrl=JSON.parse(i)}}t.recommendList=n,e.setStorageSync("recommendList",n),e.setStorageSync("Rstart",3),t.Rstart=3}}})},onPullDownRefresh:function(){var t=this;1==this.current?(console.log(a("refresh关注"," at pages\\index\\index.vue:197")),e.request({url:this.Server_IP+"followsay",data:{userId:e.getStorageSync("userId"),start:0,pagesize:3},header:{"custom-header":"followsay"},method:"POST",dataType:"json",success:function(s){if(console.log(a("获取关注用户微博第一页成功"," at pages\\index\\index.vue:211")),"0"==s.data.info.code){if(""==s.data.data.sayList){var n=[];e.showToast({title:"您还未关注任何用户",icon:"none"}),t.loadname="没有更多了,请尝试刷新吧"}else{n=JSON.parse(s.data.data.sayList);for(var o=0;o<n.length;o++){var i=n[o].picUrl;n[o].picUrl=JSON.parse(i)}t.loadname="加载更多"}e.setStorageSync("sayList",n),t.sayList=n,t.Fstart=3,console.log(a("sayList"+t.sayList," at pages\\index\\index.vue:231")),console.log(a("Fstart"+t.Fstart," at pages\\index\\index.vue:232")),e.setStorageSync("Fstart",3),setTimeout(function(){e.stopPullDownRefresh()},1e3)}}})):1==e.getStorageSync("isLogin")?e.request({url:this.Server_IP+"recommendS",data:{userId:e.getStorageSync("userId")},header:{"custom-header":"recommendS"},method:"POST",dataType:"json",success:function(s){if(console.log(a("获取推荐微博第一页成功"," at pages\\index\\index.vue:255")),console.log(a(s," at pages\\index\\index.vue:256")),"0"==s.data.info.code){if(""==s.data.data.sayList)var n=[];else{n=JSON.parse(s.data.data.recommend);for(var o=0;o<n.length;o++){var i=n[o].picUrl;n[o].picUrl=JSON.parse(i)}}t.recommendList=n,e.setStorageSync("recommendList",n),setTimeout(function(){e.stopPullDownRefresh()},1e3)}}}):e.request({url:this.Server_IP+"recommend",data:{start:0,pagesize:3},header:{"custom-header":"recommend"},method:"POST",dataType:"json",success:function(s){if(console.log(a("获取推荐微博第一页成功"," at pages\\index\\index.vue:289")),console.log(a(s," at pages\\index\\index.vue:290")),"0"==s.data.info.code){if(""==s.data.data.sayList)var n=[];else{n=JSON.parse(s.data.data.recommend);for(var o=0;o<n.length;o++){var i=n[o].picUrl;n[o].picUrl=JSON.parse(i)}}t.recommendList=n,e.setStorageSync("recommendList",n),e.setStorageSync("Rstart",3),t.Rstart=3}}})},onShow:function(){console.log(a("islogin"," at pages\\index\\index.vue:315")),console.log(a(1==e.getStorageSync("isLogin")," at pages\\index\\index.vue:316")),this.loadname="请登录再查看关注用户微博",this.sayList=e.getStorageSync("sayList"),this.recommendList=e.getStorageSync("recommendList"),1!=e.getStorageSync("isLogin")?(this.sayList=null,this.Fstart=3):(console.log(a("Fstart"+e.getStorageSync("Fstart")," at pages\\index\\index.vue:325")),this.Fstart=e.getStorageSync("Fstart")),console.log(a("sayList"+this.sayList," at pages\\index\\index.vue:328")),console.log(a("1"," at pages\\index\\index.vue:329"));try{this.userIds=e.getStorageSync("userId")}catch(t){}console.log(a(this.userIds," at pages\\index\\index.vue:335")),console.log(a(this.sayList.length<this.pagesize," at pages\\index\\index.vue:336")),this.sayList.length<this.pagesize?(console.log(a(this.sayList.length," at pages\\index\\index.vue:338")),console.log(a(this.pagesize," at pages\\index\\index.vue:339")),this.loadname="没有更多了,请尝试刷新吧"):this.loadname="加载更多"},methods:{previewImage:function(t,s){console.log(a("11"," at pages\\index\\index.vue:347")),console.log(a(t," at pages\\index\\index.vue:348")),console.log(a(s," at pages\\index\\index.vue:349"));var n=s;e.previewImage({current:t,urls:n})},getTimeFormat:function(e){var t="",a=new Date(parseInt(e));return t+=a.getFullYear()+"年",t+=a.getMonth()+1+"月",t+=a.getDate()+"日 ",t+=a.getHours()+":",t+=a.getMinutes()+":",t+=a.getSeconds(),t},change:function(e){this.current=e.detail.current},recommend:function(){this.current=0,console.log(a(this.scroll_left," at pages\\index\\index.vue:372"))},follow:function(){this.current=1,console.log(a(this.scroll_left," at pages\\index\\index.vue:376"))},add:function(){var t=this,s=null;"没有更多了,请尝试刷新吧"!=this.loadname&&e.request({url:this.Server_IP+"followsay",data:{userId:e.getStorageSync("userId"),start:this.Fstart,pagesize:this.pagesize},header:{"custom-header":"followsay"},method:"POST",dataType:"json",success:function(n){if(console.log(a(n.data," at pages\\index\\index.vue:396")),"0"==n.data.info.code){t.Fstart+=t.pagesize,e.setStorageSync("Fstart",t.Fstart),s=JSON.parse(n.data.data.sayList);for(var o=0;o<s.length;o++){var i=s[o].picUrl;s[o].picUrl=JSON.parse(i)}s.length<t.pagesize&&(t.loadname="没有更多了,请尝试刷新吧"),console.log(a(s," at pages\\index\\index.vue:408")),t.sayList=t.sayList.concat(s),e.setStorageSync("sayList",t.sayList),console.log(a(t.sayList," at pages\\index\\index.vue:411"))}}})},Radd:function(){var t=this;if(1==e.getStorageSync("isLogin")){if("没有更多了,请尝试刷新吧"==this.Rloadname)return;e.request({url:this.Server_IP+"recommendS",data:{userId:e.getStorageSync("userId")},header:{"custom-header":"recommendS"},method:"POST",dataType:"json",success:function(s){if(console.log(a("获取推荐微博第一页成功"," at pages\\index\\index.vue:433")),console.log(a(s," at pages\\index\\index.vue:434")),"0"==s.data.info.code){if(""==s.data.data.sayList)var n=[];else{n=JSON.parse(s.data.data.recommend);for(var o=0;o<n.length;o++){var i=n[o].picUrl;n[o].picUrl=JSON.parse(i)}}n.length<=0&&(t.Rloadname="没有更多的推荐了，尝试发表些吧"),t.recommendList=t.recommendList.concat(n),e.setStorageSync("recommendList",t.recommendList)}}})}else{if("没有更多了,请尝试刷新吧"==this.Rloadname)return;var s=null;e.request({url:this.Server_IP+"recommend",data:{userId:e.getStorageSync("userId"),start:this.Rstart,pagesize:this.pagesize},header:{"custom-header":"recommend"},method:"POST",dataType:"json",success:function(n){if(console.log(a(n.data," at pages\\index\\index.vue:472")),"0"==n.data.info.code){t.Rstart+=t.pagesize,e.setStorageSync("Rstart",t.Rstart),console.log(a(n," at pages\\index\\index.vue:476")),s=JSON.parse(n.data.data.recommend);for(var o=0;o<s.length;o++){var i=s[o].picUrl;s[o].picUrl=JSON.parse(i)}s.length<t.pagesize&&(t.Rloadname="没有更多了,请尝试刷新吧"),console.log(a(s," at pages\\index\\index.vue:485")),t.recommendList=t.recommendList.concat(s),e.setStorageSync("recommendList",t.recommendList),console.log(a(t.recommendList," at pages\\index\\index.vue:488"))}}})}},Thumb:function(t){1==e.getStorageSync("isLogin")?"0"==this.sayList[t].isThumb?this.addThumb(t):this.delThumb(t):e.showToast({icon:"none",title:"请先登录"})},RThumb:function(t){1==e.getStorageSync("isLogin")?"0"==this.recommendList[t].isThumb?this.RaddThumb(t):this.RdelThumb(t):e.showToast({icon:"none",title:"请先登录"})},RaddThumb:function(t){var s=this;console.log(a("点赞"," at pages\\index\\index.vue:527")),e.request({url:this.Server_IP+"addThumb",data:{userId:e.getStorageSync("userId"),textId:this.recommendList[t].textId},header:{"custom-header":"addThumb"},method:"POST",dataType:"json",success:function(n){console.log(a(n.data," at pages\\index\\index.vue:541")),"0"==n.data.info.code?(e.showToast({icon:"none",title:"点赞成功"}),s.recommendList[t].thumb=+s.recommendList[t].thumb+1,s.recommendList[t].isThumb="1",e.setStorageSync("recommendList",s.recommendList)):e.showToast({icon:"none",title:"点赞失败"})}})},RdelThumb:function(t){var s=this;console.log(a("取消点赞"," at pages\\index\\index.vue:560")),e.request({url:this.Server_IP+"delThumb",data:{userId:e.getStorageSync("userId"),textId:this.recommendList[t].textId},header:{"custom-header":"delThumb"},method:"POST",dataType:"json",success:function(n){console.log(a(n.data," at pages\\index\\index.vue:574")),"0"==n.data.info.code?(e.showToast({icon:"none",title:"取消成功"}),s.recommendList[t].thumb=+s.recommendList[t].thumb-1,s.recommendList[t].isThumb="0",e.setStorageSync("recommendList",s.recommendList)):e.showToast({icon:"none",title:"取消失败"})}})},addThumb:function(t){var s=this;console.log(a("点赞"," at pages\\index\\index.vue:593")),e.request({url:this.Server_IP+"addThumb",data:{userId:e.getStorageSync("userId"),textId:this.sayList[t].textId},header:{"custom-header":"addThumb"},method:"POST",dataType:"json",success:function(n){console.log(a(n.data," at pages\\index\\index.vue:607")),"0"==n.data.info.code?(e.showToast({icon:"none",title:"点赞成功"}),s.sayList[t].thumb=+s.sayList[t].thumb+1,s.sayList[t].isThumb="1",e.setStorageSync("sayList",s.sayList)):e.showToast({icon:"none",title:"点赞失败"})}})},delThumb:function(t){var s=this;console.log(a("取消点赞"," at pages\\index\\index.vue:626")),e.request({url:this.Server_IP+"delThumb",data:{userId:e.getStorageSync("userId"),textId:this.sayList[t].textId},header:{"custom-header":"delThumb"},method:"POST",dataType:"json",success:function(n){console.log(a(n.data," at pages\\index\\index.vue:640")),"0"==n.data.info.code?(e.showToast({icon:"none",title:"取消成功"}),s.sayList[t].thumb=+s.sayList[t].thumb-1,s.sayList[t].isThumb="0",e.setStorageSync("sayList",s.sayList)):e.showToast({icon:"none",title:"取消失败"})}})},tohomepage:function(t){console.log(a(t," at pages\\index\\index.vue:659")),e.navigateTo({url:"/pages/subscriber/homepage?userId="+t})},todiscuss:function(t){console.log(a(this.sayList[t]," at pages\\index\\index.vue:665")),e.navigateTo({url:"/pages/write/discuss?index="+t})},Rtodiscuss:function(t){1==e.getStorageSync("isLogin")?e.navigateTo({url:"/pages/write/login_discuss?index="+t}):e.navigateTo({url:"/pages/write/notLoginDiscuss?index="+t})}}};t.default=s}).call(this,a("6e42")["default"],a("0de9")["default"])},"41af":function(e,t,a){"use strict";a.r(t);var s=a("1524"),n=a.n(s);for(var o in s)"default"!==o&&function(e){a.d(t,e,function(){return s[e]})}(o);t["default"]=n.a},"472b":function(e,t,a){"use strict";var s=a("dc45"),n=a.n(s);n.a},cb02:function(e,t,a){"use strict";a.r(t);var s=a("ccd3"),n=a("41af");for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);a("472b");var i,r=a("f0c5"),d=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],i);t["default"]=d.exports},ccd3:function(e,t,a){"use strict";var s,n=function(){var e=this,t=e.$createElement,a=(e._self._c,e.__map(e.recommendList,function(t,a){var s=e.getTimeFormat(t.moment);return{$orig:e.__get_orig(t),m0:s}})),s=e.__map(e.sayList,function(t,a){var s=e.getTimeFormat(t.moment);return{$orig:e.__get_orig(t),m1:s}});e.$mp.data=Object.assign({},{$root:{l0:a,l1:s}})},o=[];a.d(t,"b",function(){return n}),a.d(t,"c",function(){return o}),a.d(t,"a",function(){return s})},da4a:function(e,t,a){"use strict";(function(e){a("1c35"),a("921b");s(a("66fd"));var t=s(a("cb02"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},dc45:function(e,t,a){}},[["da4a","common/runtime","common/vendor"]]]);